	<% if !params[:author].blank?%>
	 <% @reviews = Review.joins(book: :author).where(user_id: current_user.id) %>
  <%elsif !params[:book].blank?%>
    <% @reviews = Review.where(book: params[:book], user_id: current_user.id) %>
  <%elsif !params[:genre].blank?%>
    <% @reviews = Review.joins(book: :genres) %>
	<% end %>


<h1><%=@user.name%></h1>

<h3>Book Reviews</h3>

<text>Filter Reviews:</text>
<%= form_tag("/users/#{@user.id}", method: "get") do %>
<%= select_tag "book", options_from_collection_for_select(Book.all, "id", "title"), include_blank: true %>
<%= select_tag "author", options_from_collection_for_select(Author.all, "id", "name"), include_blank: true %>
<%= select_tag "genre", options_from_collection_for_select(Genre.all, "id", "name"), include_blank: true %>
<%= submit_tag "Filter" %>
<% end %>

<% @reviews.each do |review| %>
  <div>
		<h3>Book Title: <%= link_to review.book.title, book_path(review.book) %></h3>
    <h3>Author: <%= link_to review.book.author_name, author_path(review.book.author) %></h3>
		<h4>Rating: <%= review.rating %> Stars</h4>
    <p><%= review.content %></p>
  </div>
<% end %>
